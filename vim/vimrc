let mapleader=" "
let maplocalleader="\\"

if &compatible
  set nocompatible
endif

if ! filereadable(expand('~/.vim/autoload/plug.vim'))
	echo "Downloading junegunn/vim-plug to manage plugins..."
	silent !mkdir -p ~/.vim/autoload/
	silent !curl "https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim" > ~/.vim/autoload/plug.vim
	autocmd VimEnter * PlugInstall
endif

call plug#begin('~/.vim/plugged')

Plug 'altercation/vim-colors-solarized'
Plug 'morhetz/gruvbox'
Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'
Plug 'junegunn/fzf', { 'do': { -> fzf#install() } }
Plug 'junegunn/fzf.vim'
Plug 'tpope/vim-surround'
Plug 'tpope/vim-repeat'
Plug 'tpope/vim-commentary'
Plug 'tpope/vim-unimpaired'
Plug 'scrooloose/nerdtree'

call plug#end()

" vim-airline
let g:airline_powerline_fonts = 1
if !exists('g:airline_symbols')
	let g:airline_symbols = {}
endif
let g:airline_symbols.space = "\ua0"
let g:airline#extensions#tabline#enabled = 1
let g:airline#extensions#tabline#show_buffers = 1
let g:airline#extensions#tabline#fnamemod = ':t'

" fzf
nnoremap <C-p> :<C-u>FZF<cr>

" NERDTree settings
map <leader>n :NERDTreeToggle<cr>

filetype plugin indent on
syntax on
set encoding=utf-8
set rnu nu nuw=6

set hidden
set autoread
set nobackup
set nowritebackup
set noswapfile

set showmode
set showcmd
set ruler
set laststatus=2
set wildmenu
set wildmode=longest,list,full
set cmdheight=2
set showtabline=2

set mouse=a
set guioptions=a
set bg=dark
colo solarized
syntax enable
set clipboard+=unnamedplus

set scrolloff=1
set sidescrolloff=5
set display+=lastline

set ignorecase
set smartcase
set incsearch
set hlsearch

set shiftwidth  =4
set softtabstop =4
set expandtab
set shiftround
set smarttab
set autoindent

set backspace=indent,eol,start

set visualbell          " use visual bell instead audio signal
set t_vb=               " map visual bell to nothing

set ttimeout
set ttimeoutlen=100
set matchtime=5

set wrap
set linebreak

set nrformats-=octal

" Disables auto commenting on newline:
autocmd FileType * setlocal formatoptions-=c formatoptions-=r formatoptions-=o

" Splits open at the bottom and right, which is non-retarded, unlike vim defaults.
set splitbelow splitright

map Y y$
nnoremap c "_c
nnoremap <silent> <leader>/ :noh<cr>

map <C-h> <C-w>h
map <C-j> <C-w>j
map <C-k> <C-w>k
map <C-l> <C-w>l

noremap j gj
noremap k gk
noremap 0 g0
noremap $ g$

noremap K 5gk
noremap J 5gj

nnoremap <leader>j J

nnoremap <silent> <leader>/ :noh<CR>

nnoremap <leader>tt :tabnew<CR>
nnoremap <leader>tn :tabnext<CR>
nnoremap <leader>tp :tabprev<CR>
nnoremap <leader>to :tabo<CR>

nnoremap <leader>ev :e $MYVIMRC<cr>
nnoremap <leader>sv :so $MYVIMRC<cr>

nnoremap <leader>w :w<cr>

nnoremap <leader>mx :set lines=43 columns=188<cr>
nnoremap <leader>mn :set lines=20 columns=94<cr>

" switch buffers
nnoremap [b :bp<cr>
nnoremap ]b :bn<cr>
nnoremap [B :bf<cr>
nnoremap ]B :bl<cr>

" nnoremap <tab> <c-w>w
" nnoremap <bar> <c-w>v<c-w><right>
" nnoremap - <c-w>s<c-w><down>

" swap lines
noremap <leader>- ddp
noremap <leader>_ ddkP

" make uppercase
inoremap <leader><c-u> <esc>mmviwU`ma
nnoremap <leader><c-u> mmviwU`m

" surround with quotes
nnoremap <leader>" viw<esc>a"<esc>bi"<esc>lel
nnoremap <leader>' viw<esc>a'<esc>bi'<esc>lel
" for visual mode
vnoremap <leader>" <esc>`<i"<esc>`>la"<esc>
vnoremap <leader>' <esc>`<i'<esc>`>la'<esc>

inoremap jk <esc>

" arrow keys are inoperable in insert mode
inoremap <left> <nop>
inoremap <right> <nop>
inoremap <up> <nop>
inoremap <down> <nop>

" popular abbreviations
iabbrev adn and
iabbrev tehn then
iabbrev waht what
iabbrev @@      snaskrecki@gmail.com
iabbrev ccopy   Copyright 2020 Szymon Naskrecki, all rights reserved. 
iabbrev ssig -- <cr>Szymon Naskrecki<cr>snaskrecki@gmail.com

